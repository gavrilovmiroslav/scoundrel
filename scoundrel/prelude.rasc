tag IsDead;
tag IsBurning;

state HasGlyph { glyph: symbol, fg: color, bg: color };
state HasHealth { hp: num };
state IsDoor { closed: bool };
state IsAt { pos: point };

event BumpIntent { bumper: entity, position: point };

[Burning_Deals_Damage]
with .HasHealth(hp)
   & .IsBurning
{
    hp = hp - 1;
}

[Bump_To_Open_Doors]
on BumpIntent(@, pos)
with door.IsDoor(closed=true)
   & door.IsAt(pos)
   & door.HasGlyph(glyph, _, _)
{
    closed = false;
    destroy door;
}
